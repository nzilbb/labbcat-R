<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Appends temporal alignments on given layers to a dataframe of matches. — appendOffsets • nzilbb.labbcat</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Appends temporal alignments on given layers to a dataframe of matches. — appendOffsets"><meta name="description" content="Appends labels and start/end offsets of annotations on a given layer, to a given
dataframe of matches returned from getMatches or getAllUtterances."><meta property="og:description" content="Appends labels and start/end offsets of annotations on a given layer, to a given
dataframe of matches returned from getMatches or getAllUtterances."><meta property="og:image" content="https://nzilbb.github.io/labbcat-R/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@labbcat"><meta name="twitter:site" content="@labbcat"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nzilbb.labbcat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/examples/search-labels-alignments-praat-script.html">Search, Annotation, and Praat Script Example</a></li>
    <li><a class="dropdown-item" href="../articles/examples/search-labels-alignments-r-script.html">Search, Annotation, and R Script Example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nzilbb/labbcat-R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Appends temporal alignments on given layers to a dataframe of matches.</h1>
      <small class="dont-index">Source: <a href="https://github.com/nzilbb/labbcat-R/blob/HEAD/R/appendOffsets.R" class="external-link"><code>R/appendOffsets.R</code></a></small>
      <div class="d-none name"><code>appendOffsets.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Appends labels and start/end offsets of annotations on a given layer, to a given
dataframe of matches returned from <a href="getMatches.html">getMatches</a> or <a href="getAllUtterances.html">getAllUtterances</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">appendOffsets</span><span class="op">(</span></span>
<span>  <span class="va">matches</span>,</span>
<span>  <span class="va">layer.ids</span>,</span>
<span>  target.offset <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  annotations.per.layer <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  anchor.confidence.min <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  page.length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  no.progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  labbcat.url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  column.prefix <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-matches">matches<a class="anchor" aria-label="anchor" href="#arg-matches"></a></dt>
<dd><p>A dataframe returned by <a href="getMatches.html">getMatches</a> or <a href="getAllUtterances.html">getAllUtterances</a>, identifying
the results to which annotation labels should be appended.</p></dd>


<dt id="arg-layer-ids">layer.ids<a class="anchor" aria-label="anchor" href="#arg-layer-ids"></a></dt>
<dd><p>A vector of layer IDs.</p></dd>


<dt id="arg-target-offset">target.offset<a class="anchor" aria-label="anchor" href="#arg-target-offset"></a></dt>
<dd><p>The distance from the original target of the match, e.g.</p><ul><li><p><em>0</em> – find annotations of the match target itself</p></li>
<li><p><em>1</em> – find annotations of the token immediately <em>after</em> match target</p></li>
<li><p><em>-1</em> – find annotations of the token immediately <em>before</em> match target</p></li>
</ul></dd>


<dt id="arg-annotations-per-layer">annotations.per.layer<a class="anchor" aria-label="anchor" href="#arg-annotations-per-layer"></a></dt>
<dd><p>The number of annotations on the given layer to
retrieve. In most cases, there's only one annotation available. However, tokens
may, for example, be annotated with `all possible phonemic transcriptions', in which
case using a value of greater than 1 for this parameter provides other phonemic
transcriptions, for tokens that have more than one.</p></dd>


<dt id="arg-anchor-confidence-min">anchor.confidence.min<a class="anchor" aria-label="anchor" href="#arg-anchor-confidence-min"></a></dt>
<dd><p>The minimum confidence for alignments, e.g.</p><ul><li><p><em>0</em> – return all alignments, regardless of confidence;</p></li>
<li><p><em>50</em> – return only alignments that have been at least automatically aligned;</p></li>
<li><p><em>100</em> – return only manually-set alignments.</p></li>
</ul></dd>


<dt id="arg-page-length">page.length<a class="anchor" aria-label="anchor" href="#arg-page-length"></a></dt>
<dd><p>In order to prevent timeouts when there are a large number of
matches or the network connection is slow, rather than retrieving matches in one
big request, they are retrieved using many smaller requests. This parameter
controls the number of results retrieved per request.</p></dd>


<dt id="arg-no-progress">no.progress<a class="anchor" aria-label="anchor" href="#arg-no-progress"></a></dt>
<dd><p>TRUE to suppress visual progress bar. Otherwise, progress bar will be
shown when interactive().</p></dd>


<dt id="arg-labbcat-url">labbcat.url<a class="anchor" aria-label="anchor" href="#arg-labbcat-url"></a></dt>
<dd><p>URL to the LaBB-CAT instance (instead of inferring it from <code>matches</code>).</p></dd>


<dt id="arg-column-prefix">column.prefix<a class="anchor" aria-label="anchor" href="#arg-column-prefix"></a></dt>
<dd><p>A string to prefix each new column name with.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>matches</code> with the labels, start times, and end times appended as new columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This is a version of <a href="getMatchAlignments.html">getMatchAlignments</a> that can have a dataframe of matches piped into
it, and returns the dataframe with columns appended.</p>
<p>You can specify a threshold for confidence in the alignment, which is a value from 0
(not aligned) to 100 (manually aligned). The default is 50 (automatically aligned), so
only alignments that have been at least automatically aligned are specified. For cases
where there's a token but its alignment confidence falls below the threshold, a label
is returned, but the start/end times are NA.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><a href="getMatches.html">getMatches</a></p></li>
<li><p><a href="getMatchAlignments.html">getMatchAlignments</a></p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## Get all tokens of /I/</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="getMatches.html">getMatches</a></span><span class="op">(</span><span class="va">labbcat.url</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>segment<span class="op">=</span><span class="st">"I"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">appendOffsets</span><span class="op">(</span><span class="st">"segment"</span>, target.offset<span class="op">=</span><span class="fl">1</span>, <span class="co">## Get the segment following the token</span></span></span>
<span class="r-in"><span>        anchor.confidence.min<span class="op">=</span><span class="fl">100</span><span class="op">)</span> <span class="co">## with alignment if it's been manually aligned</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><style type="text/css">
  footer img {
      vertical-align: middle;
      height: 40px;
      display: inline-block;
  }
</style><small><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/" class="external-link"><img alt="CC-BY-SA Creative Commons Licence " src="https://nzilbb.github.io/labbcat-R/cc-by-sa.svg" title="This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License"></a><a rel="author" href="https://www.canterbury.ac.nz/nzilbb/" class="external-link"><img src="https://nzilbb.github.io/labbcat-R/nzilbb.svg" alt="Te Kāhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour" title="🄯 2021 NZILBB"></a></small>

    </footer></div>





  </body></html>

